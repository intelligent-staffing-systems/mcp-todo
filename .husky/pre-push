#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ”„ Pre-push hook: Updating dependencies to latest versions..."

# Update all dependencies to latest versions
npx npm-check-updates -u

# Install updated dependencies
echo "ğŸ“¦ Installing updated dependencies..."
npm install

# Run all tests to catch breaking changes
echo "ğŸ§ª Running all tests (unit + E2E) to verify compatibility..."
npm run test:all

# If tests pass, allow the push
echo "âœ… All checks passed! Proceeding with push..."
